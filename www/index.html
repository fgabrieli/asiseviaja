<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="msapplication-tap-highlight" content="no" />
<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
<meta name="viewport"
	content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<link rel="stylesheet" type="text/css" href="css/index.css" />
<title>Asi se viaja :S</title>

<style>
body {
	padding: 20px;
}

.lunch-camera {
	margin: 0 auto;
}

.lunch-camera button {
	width: 200px;
	height: 200px;
}

.picture-container {
	width: 100%;
}
</style>

</head>
<body data-ng-app="asiApp">
	<h1>Asi se viaja :S</h1>

	<div id="picture" data-ng-controller="asi.Picture.ngController">
		<div data-ng-show="isPictureVisible">
			<div>Picture taken:</div>
			<div class="picture-container">
				<img data-ng-src="{{picture}}" /> <span data-ng-bind="picture"></span>
			</div>
		</div>
		<div class="lunch-camera">
			<button data-ng-click="launchCamera()">Launch camera!</button>
		</div>
	</div>

	<script type="text/javascript" src="cordova.js"></script>
	<script type="text/javascript" src="js/index.js"></script>

	<script type="text/javascript" src="js/libs/jquery/2.1.1/jquery.min.js"></script>
	<script type="text/javascript"
		src="js/libs/angular/1.2.26/angular.min.js"></script>

	<script type="text/javascript">
		var asiApp = angular.module('asiApp', []);

		var asi = {};

		asi.Picture = {
			ngController : function($scope) {
				$scope.isPictureVisible = true;

				$scope.launchCamera = function() {
					function onSuccess(imageURI) {
						$scope.picture = imageURI;
						$scope.isPictureVisible = true;
						$scope.$apply();
					}

					function onFail(message) {
						alert('Failed because: ' + message);
					}

					navigator.camera.getPicture(onSuccess, onFail, {
						quality : 50,
						destinationType : Camera.DestinationType.FILE_URI,
						correctOrientation : true,
						targetWidth : screen.width
					});
				}
			}
		}

		app.initialize();
	</script>
</body>
</html>
