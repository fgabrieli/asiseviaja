<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="msapplication-tap-highlight" content="no" />
<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
<meta name="viewport"
  content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<link rel="stylesheet" type="text/css" href="css/index.css" />
<title>Asi se viaja :S</title>

<style>
.lunch-camera {
  margin: 0 auto;
}

.lunch-camera button {
  width: 200px;
  height: 200px;
}
</style>

</head>
<body data-ng-app="asiApp">
  <h1>Asi se viaja :S</h1>

  <div id="picture" data-ng-controller="asi.Picture.ngController">
    <div data-ng-show="isPictureVisible">
      <div>Picture taken:</div>
      <div>
        <img id="myImage" src="" width="200" height="200" />
      </div>
    </div>
    <div class="lunch-camera">
      <button data-ng-click="launchCamera()">Launch camera!</button>
    </div>
  </div>

  <script type="text/javascript" src="cordova.js"></script>
  <script type="text/javascript" src="js/index.js"></script>

  <script type="text/javascript" src="js/libs/jquery/2.1.1/jquery.min.js"></script>
  <script type="text/javascript" src="js/libs/angular/1.2.26/angular.min.js"></script>

  <script type="text/javascript">
      var asiApp = angular.module('asiApp', []);

      var asi = {};

      asi.Picture = {
        ngController : function($scope) {
          $scope.isPictureVisible = false;
          
          $scope.launchCamera = function() {
            function onSuccess(imageURI) {
              console.log('imageURI=', imageURI);

              var image = document.getElementById('myImage');
              image.src = imageURI;
              $scope.isPictureVisible = true;
              $scope.$apply();
            }

            function onFail(message) {
              alert('Failed because: ' + message);
            }

            navigator.camera.getPicture(onSuccess, onFail, {
              quality : 50,
              destinationType : Camera.DestinationType.FILE_URI
            });
          }
        }
      }

      app.initialize();
    </script>
</body>
</html>
